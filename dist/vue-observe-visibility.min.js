var VueObserveVisibility=function(e){"use strict";function r(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(e,t,i){this.el=e,this.observer=null,this.frozen=!1,this.createObserver(t,i)}var t=e.prototype;return t.createObserver=function(e,t){var r=this;this.observer&&this.destroyObserver(),this.frozen||(this.options=function(e){return"function"==typeof e?{callback:e}:e}(e),this.callback=this.options.callback,this.callback&&this.options.throttle&&(this.callback=function(n,o){function e(e){for(var t=arguments.length,i=new Array(1<t?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];a=i,s&&e===l||(l=e,clearTimeout(s),s=setTimeout(function(){n.apply(void 0,[e].concat(a)),s=0},o))}var s,l,a;return e._clear=function(){clearTimeout(s)},e}(this.callback,this.options.throttle)),this.oldResult=void 0,this.observer=new IntersectionObserver(function(e){var t=e[0];if(r.callback){var i=t.isIntersecting&&t.intersectionRatio>=r.threshold;if(i===r.oldResult)return;r.oldResult=i,r.callback(i,t),i&&r.options.once&&(r.frozen=!0,r.destroyObserver())}},this.options.intersection),t.context.$nextTick(function(){r.observer&&r.observer.observe(r.el)}))},t.destroyObserver=function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)},function(e,t,i){t&&r(e.prototype,t),i&&r(e,i)}(e,[{key:"threshold",get:function(){return this.options.intersection&&this.options.intersection.threshold||0}}]),e}();function s(e,t,i){var r=t.value;if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var n=new o(e,r,i);e._vue_visibilityState=n}}var t={bind:s,update:function(e,t,i){var r=t.value;if(!function e(t,i){if(t===i)return!0;if("object"!=typeof t)return!1;for(var r in t)if(!e(t[r],i[r]))return!1;return!0}(r,t.oldValue)){var n=e._vue_visibilityState;n?n.createObserver(r,i):s(e,{value:r},i)}},unbind:function(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}};function i(e){e.directive("observe-visibility",t)}var n={version:"0.4.4",install:i},l=null;return"undefined"!=typeof window?l=window.Vue:"undefined"!=typeof global&&(l=global.Vue),l&&l.use(n),e.ObserveVisibility=t,e.default=n,e.install=i,e}({});
